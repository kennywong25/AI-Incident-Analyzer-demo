<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>AI Incident Analyzer</title>
            <style>
                body { font-family: Arial, sans-serif; background:#f6f6f6; }
                .c { max-width: 900px; margin: 30px auto; background:#fff; padding: 18px; border-radius: 12px; }
                textarea,input { width:100%; padding:10px; margin:6px 0 12px; }
                button { padding:10px 14px; cursor:pointer; }
                pre { background:#111; color:#0f0; padding:12px; border-radius:10px; overflow:auto; }
            </style>
    </head>

    <body>
    <div class="c">
        <h1>AI Incident Analyzer</h1>
        <label>API URL</label>
        <input id="apiUrl" value="http://localhost:3001" />
        <label>Temperatura</label>
        <input id="temp" type="number" min="0" max="1" step="0.1" value="0.2" />
        <label>Logs / Contexto (anonimizado)</label>
        <textarea id="text" rows="10"></textarea>
        <button id="run">Analizar</button>
        <pre id="out"></pre>
    </div>
    <script>
        const out = document.getElementById("out");
        document.getElementById("run").onclick = async () => {
        out.textContent = "Procesando...";
        const apiUrl = document.getElementById("apiUrl").value.trim();
        const temperature = Number(document.getElementById("temp").value);
        const text = document.getElementById("text").value;
        try {
            const r = await fetch(apiUrl + "/ai/analyze", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ text, temperature })
            });
            const data = await r.json();
            out.textContent = JSON.stringify(data, null, 2);
        } catch (e) {
            out.textContent = "Error: " + e;
        }
        };
    </script>
    </body>
</html>